name: bgp

topology:
  nodes:
    R1:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - R1/daemons:/etc/frr/daemons
        - R1/frr.conf:/etc/frr/frr.conf
        - R1/vtysh.conf:/etc/frr/vtysh.conf
    R2:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - R2/daemons:/etc/frr/daemons
        - R2/frr.conf:/etc/frr/frr.conf
        - R2/vtysh.conf:/etc/frr/vtysh.conf
    R3:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - R3/daemons:/etc/frr/daemons
        - R3/frr.conf:/etc/frr/frr.conf
        - R3/vtysh.conf:/etc/frr/vtysh.conf
    R4:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - R4/daemons:/etc/frr/daemons
        - R4/frr.conf:/etc/frr/frr.conf
        - R4/vtysh.conf:/etc/frr/vtysh.conf
    R5:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - R5/daemons:/etc/frr/daemons
        - R5/frr.conf:/etc/frr/frr.conf
        - R5/vtysh.conf:/etc/frr/vtysh.conf
    RR1:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - RR1/daemons:/etc/frr/daemons
        - RR1/frr.conf:/etc/frr/frr.conf
        - RR1/vtysh.conf:/etc/frr/vtysh.conf
    RR2:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - RR2/daemons:/etc/frr/daemons
        - RR2/frr.conf:/etc/frr/frr.conf
        - RR2/vtysh.conf:/etc/frr/vtysh.conf
    ISP1:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - ISP1/daemons:/etc/frr/daemons
        - ISP1/frr.conf:/etc/frr/frr.conf
        - ISP1/vtysh.conf:/etc/frr/vtysh.conf
    ISP2:
      kind: linux
      image: frrouting/frr:v7.5.1
      network-mode: none
      binds:
        - ISP2/daemons:/etc/frr/daemons
        - ISP2/frr.conf:/etc/frr/frr.conf
        - ISP2/vtysh.conf:/etc/frr/vtysh.conf
    PC1:
      kind: linux
      image: praqma/network-multitool:latest


  links:
  - endpoints: ["R1:eth1", "ISP1:eth1"]
  - endpoints: ["R1:eth2", "R3:eth2"]
  - endpoints: ["R1:eth3", "R4:eth3"]
  - endpoints: ["R2:eth1", "ISP2:eth1"]
  - endpoints: ["R2:eth3", "R3:eth3"]
  - endpoints: ["R2:eth2", "R4:eth2"]
  - endpoints: ["R5:eth1", "PC1:eth1"]
  - endpoints: ["R5:eth2", "R3:eth1"]
  - endpoints: ["R5:eth3", "R4:eth1"]
  - endpoints: ["RR1:eth1", "R1:eth4"]
  - endpoints: ["RR1:eth2", "R3:eth4"]
  - endpoints: ["RR2:eth1", "R2:eth4"]
  - endpoints: ["RR2:eth2", "R4:eth4"]
  - endpoints: ["ISP1:eth2", "ISP2:eth2"]